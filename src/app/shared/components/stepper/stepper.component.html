<div class="mb-8">
  <nav aria-label="Progress">
    <ol class="flex items-center">
      @for (step of steps; track $index; let i = $index) {
        <li
          [class.flex-1]="i < steps.length - 1"
          class="relative"
          [class.pr-8]="i < steps.length - 1">
          <!-- Step -->
          <div class="flex items-center">
            <div class="flex items-center gap-3">
              <!-- Circle -->
              <div
                [class.bg-gov-navy]="currentStep() === i || step.completed"
                [class.text-white]="currentStep() === i || step.completed"
                [class.border-2]="currentStep() !== i && !step.completed"
                [class.border-gov-gray]="currentStep() !== i && !step.completed"
                [class.text-gov-gray]="currentStep() !== i && !step.completed"
                class="flex items-center justify-center w-10 h-10 rounded-full font-semibold">
                @if (step.completed) {
                  <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                    <path
                      fill-rule="evenodd"
                      d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                      clip-rule="evenodd" />
                  </svg>
                } @else {
                  {{ i + 1 }}
                }
              </div>

              <!-- Label -->
              <div>
                <p
                  [class.text-gov-navy]="currentStep() === i"
                  [class.font-semibold]="currentStep() === i"
                  [class.text-gov-gray]="currentStep() !== i"
                  class="text-sm">
                  {{ step.label | translate }}
                </p>
              </div>
            </div>

            <!-- Connector Line -->
            @if (i < steps.length - 1) {
              <div
                [class.bg-gov-navy]="step.completed"
                [class.bg-gray-300]="!step.completed"
                class="absolute top-5 left-10 w-full h-0.5"
                style="width: calc(100% - 2.5rem)"></div>
            }
          </div>
        </li>
      }
    </ol>
  </nav>

  <!-- Navigation Buttons -->
  <div class="flex items-center justify-between mt-8 pt-6 border-t border-gray-200">
    <button
      type="button"
      (click)="previous()"
      [disabled]="currentStep() === 0"
      class="btn btn-secondary">
      {{ 'common.previous' | translate }}
    </button>

    <button
      type="button"
      (click)="next()"
      [disabled]="currentStep() === steps.length - 1"
      class="btn btn-primary">
      {{ currentStep() === steps.length - 1 ? ('common.submit' | translate) : ('common.next' | translate) }}
    </button>
  </div>
</div>
